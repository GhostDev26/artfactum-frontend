<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>artfactum-react</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
    <!-- build:js scripts/vendor/modernizr.js -->
    <script src="bower_components/modernizr/modernizr.js"></script>
    <!-- endbuild -->

  </head>
  <body>
    <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

	<div class='container'>
	  <div class='jumbotron'>
       
	      <h4>Ajax response:</h1>
		  <div id="info" style="border-bottom: solid black 3px">
		  data
		  </div>
		  <h4>App</h4>
		  <div id="artfactum" style="border-bottom: solid black 3px"></div>
		  <div id='render' style='border-bottom: solid black 3px' ></div>
      </div>
	</div>
	

    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/react/react.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
   <script src="bower_components/react/jsxtransformer.js"></script>
	
   

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
	
      /*(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-XXXXX-X');ga('send','pageview');*/
    
	</script>
	
        <!-- build:js(.) scripts/plugins.js -->
        <script src="bower_components/bootstrap/js/affix.js"></script>
        <script src="bower_components/bootstrap/js/alert.js"></script>
        <script src="bower_components/bootstrap/js/dropdown.js"></script>
        <script src="bower_components/bootstrap/js/tooltip.js"></script>
        <script src="bower_components/bootstrap/js/modal.js"></script>
        <script src="bower_components/bootstrap/js/transition.js"></script>
        <script src="bower_components/bootstrap/js/button.js"></script>
        <script src="bower_components/bootstrap/js/popover.js"></script>
        <script src="bower_components/bootstrap/js/carousel.js"></script>
        <script src="bower_components/bootstrap/js/scrollspy.js"></script>
        <script src="bower_components/bootstrap/js/collapse.js"></script>
        <script src="bower_components/bootstrap/js/tab.js"></script>
        <!-- endbuild -->

        <!-- build:js({app,.tmp}) scripts/main.js -->
        <script src="scripts/main.js"></script>
		<!-- endbuild -->
		 

<script type="text/jsx">
  
  var Ajax = React.createClass({
	getInitialState: function(){
	  return {data: []};
	},
	componentDidMount: function() {
	  $.ajax({
		url: this.props.url,
		dataType: 'json',
		success: function(data) {
		  this.setState( {data: data});
		  this.props.onSuccess({data:data});
		}.bind(this),
		error: function(Ajax, status, err) {
		  console.error(this.props.url, status, err.toString());
		  this.props.onError({data: [this.props.url,status, err.toString() ]});
		}.bind(this)
	  });
	},
	render: function() {
	  return ( <div /> );
	}
	
  });
  
  var Dispatcher = React.createClass({
	getInitialState: function(){
	  return {data: []};
	},
	
	handleSuccess: function(e) {
	  document.getElementById('info').innerHTML = JSON.stringify(e);
	  this.setState({data:e.data});
	  return;
	},
	
	handleError: function(e){
	  document.getElementById('info').innerHTML = JSON.stringify(e);
	  return;
	},
	
	render: function(){
	  return ( 
		<div class='handleAjax'>
  	      <Ajax 
		    onError={this.handleError} 
			onSuccess={this.handleSuccess} 
			ref="ajax" 
			url={this.props.url} 
		  ></Ajax>
		  <FirstChild_A data={this.state.data} />
		</div>
	  )
	}
  });
  
  var FirstChild_A = React.createClass({
	
	render: function(){
	  
	  var items = this.props.data.map( function(i){
	    return (
		  <li>{i.name}</li>
		);
	  
	  });
	  return (
	    <div className='items'>
		  <ul>{items}</ul>
		  <li>mary</li>
		</div>
	  );
	  
	}
    
  });
   
  React.render(
	<Dispatcher url='data.json'/>,
	document.getElementById('artfactum')
  );
  
  
</script>
       

</body>
</html>
